<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Non-Owner Operations Toolbox</title>
    <style>

body {
    font-family: Arial, sans-serif;
    margin: 0 auto;
    padding: 5%;
    box-sizing: border-box;
    line-height: 1.6;
    max-width: 500px; 
    text-align: center;
    background-color: #121212; 
    color: #e0e0e0; 
}

h1 {
    font-size: 1.8rem;
    text-align: center;
    margin-bottom: 5%;
    color: #ffffff; 
}

h1 a {
    color: green;
    text-decoration: none;
}

h1 a:hover {
    color: lightgreen;
}

.hidden {
    display: none;
}

.form-group {
    margin-bottom: 5%;
}

.subtitle {
    text-align: center;
    font-size: 1rem;
    color: #b0b0b0; 
    margin-bottom: 20px;
    white-space: normal;  
    display: block;
}
.subtitle a {
    color: green;
    text-decoration: none;
}

.subtitle a:hover {
    color: lightgreen;
}

.subtitle .code {
    font-family: monospace;
    color: lightblue;
}

label {
    font-size: 1rem;
    font-weight: bold;
    margin-bottom: 2%;
    display: block;
}

input {
    width: 100%;
    font-size: 1rem;
    padding: 3%;
    margin-top: 2%;
    border: 1px solid #333; 
    border-radius: 5px;
    box-sizing: border-box;
    background-color: #1e1e1e; 
    color: #ffffff; 
}

input:focus {
    outline: none;
    border-color: lightgrey;
    box-shadow: 0 0 5px rgba(76, 175, 80, 0.5);
}

button {
    padding: 3%;
    font-size: 1rem;
    font-weight: bold;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 5%;
    width: 90%;
    max-width: 90%;
    display: block;
    margin-left: auto;
    margin-right: auto;
    background-color: green;
    color: #ffffff; 
}

button:disabled {
    background-color: #555; 
    color: #ccc;
    cursor: not-allowed;
}

button:enabled {
    background-color: green;
    color: white;
}

.word-wrap {
    white-space: pre-wrap;
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-word;
    max-width: 100%;
    display: block;
    padding: 2%;  
    border-radius: 2%;  
    background-color: #1e1e1e; 
    color: #e0e0e0; 
}

.checkbox-container {
    display: flex;
    flex-direction: row; 
    align-items: center; 
    justify-content: flex-start; 
    width: 100%; 
    margin-top: 2%;
}

.checkbox-container input[type="checkbox"] {
    width: auto;
    height: auto;
    margin: 0; 
    margin-right: 2%; 
    flex-shrink: 0; 
}

.checkbox-container label {
    font-size: 0.85rem;
    line-height: 1.2;
    text-align: left;
    flex-grow: 1; 
    display: inline-block;
    white-space: normal; 
    width: 100%;
    margin: 0; 
    color: #e0e0e0; 
}

input[type="checkbox"]:checked {
    accent-color: green;
}

.footer {
    text-align: center;
    margin-top: 5%;
    font-size: 0.9rem;
    color: #b0b0b0;
}

.footer a {
    color: green;
    text-decoration: none;
}

.footer a:hover {
    color: lightgreen;
}

.disclaimer {
    font-size: 0.8rem;
}

.disclaimer .highlight {
    color: red;
}

#resultMessage {
    margin-top: 5%;
    font-size: 0.9rem;
    font-family: monospace;
}

.textarea-metadata {
    width: 100%; 
    min-height: 100px; 
    max-height: 500px; 
    resize: vertical; 
    padding: 10px; 
    border: 1px solid #333; 
    border-radius: 5px; 
    font-size: 14px; 
    box-sizing: border-box; 
    transition: border-color 0.3s ease; 
    background-color: #1e1e1e; 
    color: #ffffff; 
    font-family: monospace;
}

.textarea-metadata:focus {
    border-color: lightgrey;
    outline: none; 
    box-shadow: 0 0 5px rgba(76, 175, 80, 0.5);
}


@media screen and (min-width: 768px) {
    body {
        padding: 2%;
    }

    h1 {
        font-size: 1.8rem;
    }

    button {
        max-width: 450px;
        margin: 2% auto;
        display: block;
    }

    #resultMessage {
        max-width: 500px;
        margin: 0 auto;
    }
}

        
    </style>

    <script src="https://unpkg.com/@hiveio/dhive@latest/dist/dhive.js" defer></script>
    
    <script defer>


document.addEventListener("DOMContentLoaded", () => {
    
    const client = new dhive.Client([
        "https://api.hive.blog",
        "https://api.openhive.network",
        "https://anyx.io",
        "https://api.deathwing.me",
        "https://hive-api.arcange.eu",
        "https://rpc.mahdiyari.info",
    ]);

    
    const accountNameUpd = document.getElementById("accountNameUpd");
    const newPublicActiveKeyUpd = document.getElementById("newPublicActiveKeyUpd");
    const newPublicPostingKeyUpd = document.getElementById("newPublicPostingKeyUpd");
    const newPublicMemoKeyUpd = document.getElementById("newPublicMemoKeyUpd");
    const useHiveKeychainUpd = document.getElementById("useHiveKeychainUpd");
    const privateActiveKeyUpdContainer = document.getElementById("privateActiveKeyUpdContainer");
    const privateActiveKeyUpd = document.getElementById("privateActiveKeyUpd");
    const submitButtonUpd = document.getElementById("submitButtonUpd");
    const resultMessageUpd = document.getElementById("resultMessageUpd");

    
    const accountNameGov = document.getElementById("accountNameGov");
    const proxyAccountGov = document.getElementById("proxyAccountGov");
    const useHiveKeychainGov = document.getElementById("useHiveKeychainGov");
    const privateActiveKeyGovContainer = document.getElementById("privateActiveKeyGovContainer");
    const privateActiveKeyGov = document.getElementById("privateActiveKeyGov");
    const submitButtonGov = document.getElementById("submitButtonGov");
    const resultMessageGov = document.getElementById("resultMessageGov");

    
    const accountNameJMet = document.getElementById("accountNameJMet");
    const editOnlyPostingJMet = document.getElementById("editOnlyPostingJMet");
    const loadJsonMetadataButton = document.getElementById("loadJsonMetadataButton");
    const editJsonMetadataContainer = document.getElementById("editJsonMetadataContainer");
    const activeJsonMetadataSection = document.getElementById("activeJsonMetadataSection");
    const jsonMetadataEditLabel = document.getElementById("jsonMetadataEditLabel");
    const jsonMetadataEdit = document.getElementById("jsonMetadataEdit");
    const postingJsonMetadataEdit = document.getElementById("postingJsonMetadataEdit");
    const useHiveKeychainJMet = document.getElementById("useHiveKeychainJMet");
    const privateKeyJMetContainer = document.getElementById("privateKeyJMetContainer");
    const privateKeyJMet = document.getElementById("privateKeyJMet");
    const privateKeyJMetLabel = document.querySelector('label[for="privateKeyJMet"]');
    const submitButtonJMet = document.getElementById("submitButtonJMet");
    const resultMessageJMet = document.getElementById("resultMessageJMet");

    
    const accountNameCJson = document.getElementById("accountNameCJson");
    const customJsonIdCJson = document.getElementById("customJsonIdCJson");
    const customJsonContentCJson = document.getElementById("customJsonContentCJson");
    const isKeyActiveCJson = document.getElementById("isKeyActiveCJson");
    const useHiveKeychainCJson = document.getElementById("useHiveKeychainCJson");
    const privateKeyCJsonContainer = document.getElementById("privateKeyCJsonContainer");
    const privateKeyCJson = document.getElementById("privateKeyCJson");
    const submitButtonCJson = document.getElementById("submitButtonCJson");
    const resultMessageCJson = document.getElementById("resultMessageCJson");

    
    const accountNameReqRec = document.getElementById("accountNameReqRec");
    const accountToBeRecoveredReqRec = document.getElementById("accountToBeRecoveredReqRec");
    const newPublicOwnerKeyReqRec = document.getElementById("newPublicOwnerKeyReqRec");
    const useHiveKeychainReqRec = document.getElementById("useHiveKeychainReqRec");
    const privateActiveKeyReqRecContainer = document.getElementById("privateActiveKeyReqRecContainer");
    const privateActiveKeyReqRec = document.getElementById("privateActiveKeyReqRec");
    const submitButtonReqRec = document.getElementById("submitButtonReqRec");
    const resultMessageReqRec = document.getElementById("resultMessageReqRec");


    
    function validateAccountNameStructure(accountName) {
        const accountNameRegex = /^[a-z](([a-z0-9-]+)?[a-z0-9])?(\.[a-z](([a-z0-9-]+)?[a-z0-9])?)*$/;
        
        const validDotPlacement = !accountName.includes(".") || accountName.split(".").every(part => part.length >= 3);
        
        const noDotFollowedByHyphenOrNumber = !/\.[0-9-]/.test(accountName);
        return (
            accountName.length >= 3 &&
            accountName.length <= 16 &&
            accountNameRegex.test(accountName) &&
            validDotPlacement &&
            noDotFollowedByHyphenOrNumber &&
            !accountName.includes("-.")
        );
    }

    
    function validateAccountInput(inputField, submitButton) {
        const accountName = inputField.value.trim();
        if (accountName === "") {
            inputField.style.borderColor = "";
            submitButton.disabled = true;
            return;
        }
        const correctNameFormat = validateAccountNameStructure(accountName);
        inputField.style.borderColor = correctNameFormat ? "" : "red";
        
    }


    
    
    function togglePrivateKeyInputVisibilityUpd() {
        if (useHiveKeychainUpd.checked) {
            privateActiveKeyUpdContainer.style.display = "none";
            privateActiveKeyUpd.value = "";
        } else {
            privateActiveKeyUpdContainer.style.display = "block";
        }
    }

    
    function validateAccountUpdateTool() {
        const accountName = accountNameUpd.value.trim();
        const newPublicActiveKey = newPublicActiveKeyUpd.value.trim();
        const newPublicPostingKey = newPublicPostingKeyUpd.value.trim();
        const newPublicMemoKey = newPublicMemoKeyUpd.value.trim();
        const privateActiveKey = privateActiveKeyUpd.value.trim();
        const useHiveKeychain = useHiveKeychainUpd.checked;

        
        const isAccountNameValid = accountName && validateAccountNameStructure(accountName);

        
        if (isAccountNameValid && newPublicActiveKey && newPublicPostingKey && newPublicMemoKey && (privateActiveKey || useHiveKeychain)) {
            submitButtonUpd.disabled = false;
            submitButtonUpd.style.backgroundColor = "green"; 
        } else {
            submitButtonUpd.disabled = true;
            submitButtonUpd.style.backgroundColor = ""; 
        }
    }

    
    accountNameUpd.addEventListener("input", () => validateAccountInput(accountNameUpd, submitButtonUpd));

    
    useHiveKeychainUpd.addEventListener("change", togglePrivateKeyInputVisibilityUpd);
    useHiveKeychainUpd.addEventListener("change", validateAccountUpdateTool);

    
    accountNameUpd.addEventListener("input", validateAccountUpdateTool);
    newPublicActiveKeyUpd.addEventListener("input", validateAccountUpdateTool);
    newPublicPostingKeyUpd.addEventListener("input", validateAccountUpdateTool);
    newPublicMemoKeyUpd.addEventListener("input", validateAccountUpdateTool);
    privateActiveKeyUpd.addEventListener("input", validateAccountUpdateTool);

    
    if (submitButtonUpd) {
        submitButtonUpd.addEventListener("click", submitAccountUpdateTransaction);
    }

    
    togglePrivateKeyInputVisibilityUpd();

    
    validateAccountUpdateTool();

    
    async function submitAccountUpdateTransaction() {
        if (!accountNameUpd || !newPublicActiveKeyUpd || !newPublicPostingKeyUpd || !newPublicMemoKeyUpd || !resultMessageUpd) return;

        const accountName = accountNameUpd.value.trim();
        const newPublicActiveKey = newPublicActiveKeyUpd.value.trim();
        const newPublicPostingKey = newPublicPostingKeyUpd.value.trim();
        const newPublicMemoKey = newPublicMemoKeyUpd.value.trim();
        const privateActiveKey = privateActiveKeyUpd.value.trim();
        const useHiveKeychain = useHiveKeychainUpd.checked;

        const op = [
            "account_update", {
                account: accountName,
                active: {
                    account_auths: [],
                    key_auths: [[newPublicActiveKey, 1]],
                    weight_threshold: 1
                },
                posting: {
                    account_auths: [],
                    key_auths: [[newPublicPostingKey, 1]],
                    weight_threshold: 1
                },
                memo_key: newPublicMemoKey,
                json_metadata: ""
            }
        ];

        try {
            if (useHiveKeychain) {
                if (window.hive_keychain) {
                    window.hive_keychain.requestBroadcast(accountName, [op], "Active", function(result) {
                        if (result.success) {
                            resultMessageUpd.textContent = "Transaction successfully broadcast: " + JSON.stringify(result);
                            resultMessageUpd.style.color = "green";
                        } else {
                            resultMessageUpd.textContent = "Error broadcasting transaction: " + result.message;
                            resultMessageUpd.style.color = "red";
                        }
                    });
                } else {
                    resultMessageUpd.textContent = "You need to install Hive Keychain to sign the transaction.";
                    resultMessageUpd.style.color = "red";
                }
            } else {
                
                const key = dhive.PrivateKey.fromString(privateActiveKey);
                const broadcastResult = await client.broadcast.sendOperations([op], key);
                resultMessageUpd.textContent = "Transaction successfully broadcast: " + JSON.stringify(broadcastResult);
                resultMessageUpd.style.color = "green";
            }
        } catch (error) {
            resultMessageUpd.textContent = "Error broadcasting transaction: " + error.message;
            resultMessageUpd.style.color = "red";
        } finally {
        
        if (useHiveKeychainUpd) useHiveKeychainUpd.checked = false;
        if (privateActiveKeyUpdContainer) privateActiveKeyUpdContainer.style.display = "block";
        if (privateActiveKeyUpd) privateActiveKeyUpd.value = "";
        validateAccountUpdateTool();
        }
    }


    
    
    function togglePrivateKeyInputVisibilityGov() {
        if (useHiveKeychainGov.checked) {
            privateActiveKeyGovContainer.style.display = "none";
            privateActiveKeyGov.value = "";
        } else {
            privateActiveKeyGovContainer.style.display = "block";
        }
    }

    
    function validateGovernanceProxyTool() {
        const accountName = accountNameGov.value.trim();
        const proxyAccount = proxyAccountGov.value.trim();
        const privateActiveKey = privateActiveKeyGov.value.trim();
        const useHiveKeychain = useHiveKeychainGov.checked;

        
        const isValidAccount = validateAccountNameStructure(accountName);

        
        const isValidProxyAccount = proxyAccount === "" || validateAccountNameStructure(proxyAccount);

        const areAccountsDifferentGov = accountName !== proxyAccount;

        
        if (isValidAccount && isValidProxyAccount && areAccountsDifferentGov && (privateActiveKey || useHiveKeychain)) {
            submitButtonGov.disabled = false;
            submitButtonGov.style.backgroundColor = "green"; 
        } else {
            submitButtonGov.disabled = true;
            submitButtonGov.style.backgroundColor = ""; 
        }
    }

    
    accountNameGov.addEventListener("input", () => validateAccountInput(accountNameGov, submitButtonGov));
    proxyAccountGov.addEventListener("input", () => validateAccountInput(proxyAccountGov, submitButtonGov));

    
    useHiveKeychainGov.addEventListener("change", togglePrivateKeyInputVisibilityGov);
    useHiveKeychainGov.addEventListener("change", validateGovernanceProxyTool);

    
    accountNameGov.addEventListener("input", validateGovernanceProxyTool);
    proxyAccountGov.addEventListener("input", validateGovernanceProxyTool);
    privateActiveKeyGov.addEventListener("input", validateGovernanceProxyTool);

    
    if (submitButtonGov) {
        submitButtonGov.addEventListener("click", submitTransactionGov);
    }

    
    togglePrivateKeyInputVisibilityGov();

    
    validateGovernanceProxyTool();

    
    async function submitTransactionGov() {
        if (!accountNameGov || !proxyAccountGov || !resultMessageGov) return;

        const accountName = accountNameGov.value.trim();
        const proxyAccount = proxyAccountGov.value.trim();
        const privateActiveKey = privateActiveKeyGov ? privateActiveKeyGov.value.trim() : "";
        const useHiveKeychain = useHiveKeychainGov.checked;

        const op = [
            "account_witness_proxy", { account: accountName, proxy: proxyAccount || "" },
        ];

        try {
            if (useHiveKeychain) {
                if (window.hive_keychain) {
                    window.hive_keychain.requestBroadcast(accountName, [op], "Active", function(result) {
                        if (result.success) {
                            resultMessageGov.textContent = "Transaction successfully broadcast: " + JSON.stringify(result);
                            resultMessageGov.style.color = "green";
                        } else {
                            resultMessageGov.textContent = "Error broadcasting transaction: " + result.message;
                            resultMessageGov.style.color = "red";
                        }
                    });
                } else {
                    resultMessageGov.textContent = "You need to install Hive Keychain to sign the transaction.";
                    resultMessageGov.style.color = "red";
                }
            } else {
                
                const key = dhive.PrivateKey.fromString(privateActiveKey);
                const broadcastResult = await client.broadcast.sendOperations([op], key);
                resultMessageGov.textContent = "Transaction successfully broadcast: " + JSON.stringify(broadcastResult);
                resultMessageGov.style.color = "green";
            }
        } catch (error) {
            resultMessageGov.textContent = "Error broadcasting transaction: " + error.message;
            resultMessageGov.style.color = "red";
        } finally {
        
        if (useHiveKeychainGov) useHiveKeychainGov.checked = false;
        if (privateActiveKeyGovContainer) privateActiveKeyGovContainer.style.display = "block";
        if (privateActiveKeyGov) privateActiveKeyGov.value = "";
        validateGovernanceProxyTool();
        }
    }


    
    
    function togglePrivateKeyInputVisibilityJMet() {
        if (useHiveKeychainJMet.checked) {
            privateKeyJMetContainer.style.display = "none";
            privateKeyJMet.value = "";
        } else {
            privateKeyJMetContainer.style.display = "block";
        }
    }

    
    function validateLoadJsonMetadataButton() {
        const accountName = accountNameJMet.value.trim();

        
        const isValidAccount = validateAccountNameStructure(accountName);

        
        if (isValidAccount) {
            loadJsonMetadataButton.disabled = false;
            loadJsonMetadataButton.style.backgroundColor = "green"; 
        } else {
            loadJsonMetadataButton.disabled = true;
            loadJsonMetadataButton.style.backgroundColor = ""; 
        }
    }

    
    function validateSubmitButtonJMet() {
        const accountName = accountNameJMet.value.trim();
        const privateActiveKey = privateKeyJMet.value.trim();
        const useHiveKeychain = useHiveKeychainJMet.checked;

        
        const isValidAccount = validateAccountNameStructure(accountName);

        
        if (isValidAccount && (privateActiveKey || useHiveKeychain)) {
            submitButtonJMet.disabled = false;
            submitButtonJMet.style.backgroundColor = "green"; 
        } else {
            submitButtonJMet.disabled = true;
            submitButtonJMet.style.backgroundColor = ""; 
        }
    }

    
    accountNameJMet.addEventListener("input", () => {
        validateAccountInput(accountNameJMet, loadJsonMetadataButton);
        validateAccountInput(accountNameJMet, submitButtonJMet);
    });

    
    useHiveKeychainJMet.addEventListener("change", togglePrivateKeyInputVisibilityJMet);
    useHiveKeychainJMet.addEventListener("change", validateSubmitButtonJMet);

    
    accountNameJMet.addEventListener("input", validateLoadJsonMetadataButton);
    accountNameJMet.addEventListener("input", validateSubmitButtonJMet);
    jsonMetadataEdit.addEventListener("input", validateSubmitButtonJMet);
    postingJsonMetadataEdit.addEventListener("input", validateSubmitButtonJMet);
    privateKeyJMet.addEventListener("input", validateSubmitButtonJMet);

    
    editOnlyPostingJMet.addEventListener("change", () => {
        
        if (editJsonMetadataContainer) editJsonMetadataContainer.style.display = "none";
        if (jsonMetadataEdit) jsonMetadataEdit.value = "";
        if (postingJsonMetadataEdit) postingJsonMetadataEdit.value = "";
        if (useHiveKeychainJMet) useHiveKeychainJMet.checked = false;
        if (privateKeyJMetContainer) privateKeyJMetContainer.style.display = "block";
        if (privateKeyJMet) privateKeyJMet.value = "";
        if (submitButtonJMet) submitButtonJMet.disabled = true;
        if (resultMessageJMet) resultMessageJMet.textContent = "";

        
        if (jsonMetadataEdit) jsonMetadataEdit.readOnly = editOnlyPostingJMet.checked ? true : false;

        
        privateKeyJMetLabel.textContent = editOnlyPostingJMet.checked
            ? "Your Private Posting Key:"
            : "Your Private Active Key:";

        
        privateKeyJMet.placeholder = editOnlyPostingJMet.checked
            ? "Private Posting Key (5...)"
            : "Private Active Key (5...)";

        jsonMetadataEditLabel.textContent = editOnlyPostingJMet.checked
            ? "View your account's \"JSON Metadata\":"
            : "Edit your account's \"JSON Metadata\":";

        
        jsonMetadataEdit.placeholder = editOnlyPostingJMet.checked
            ? "JSON metadata is empty."
            : "Enter JSON metadata here...";

        
        validateSubmitButtonJMet();
    });


    
    jsonMetadataEdit.addEventListener("input", function () {
        this.style.height = "auto"; 
        this.style.height = (this.scrollHeight) + "px"; 
    });

    
    postingJsonMetadataEdit.addEventListener("input", function () {
        this.style.height = "auto"; 
        this.style.height = (this.scrollHeight) + "px"; 
    });

    
    if (loadJsonMetadataButton) {
        loadJsonMetadataButton.addEventListener("click", loadJsonMetadata);
    }
    if (submitButtonJMet) {
        submitButtonJMet.addEventListener("click", submitTransactionJMet);
    }

    
    togglePrivateKeyInputVisibilityJMet();

    
    validateSubmitButtonJMet();
    validateLoadJsonMetadataButton();

    async function loadJsonMetadata() {
        const accountName = accountNameJMet.value.trim(); 
        if (!accountName) {
            resultMessageJMet.textContent = "Please enter a valid Hive account name.";
            resultMessageJMet.style.color = "red";
            return;
        }

        try {
            
            const result = await client.database.getAccounts([accountName]);

            if (result && result.length > 0) {
                const account = result[0];
                const jsonMetadata = account.json_metadata || null; 
                const postingJsonMetadata = account.posting_json_metadata || null; 

                
                jsonMetadataEdit.value = jsonMetadata;
                postingJsonMetadataEdit.value = postingJsonMetadata;

                
                editJsonMetadataContainer.style.display = "block";

            } else {
                resultMessageJMet.textContent = "Account not found. Please check the account name.";
                resultMessageJMet.style.color = "red";
            }
        } catch (error) {
            resultMessageJMet.textContent = "Error loading account metadata: " + error.message;
            resultMessageJMet.style.color = "red";
        }
    }

    async function submitTransactionJMet() {
        if (!accountNameJMet || !jsonMetadataEdit || !postingJsonMetadataEdit || !resultMessageJMet) return;

        const accountName = accountNameJMet.value.trim();
        const newPostingJsonMetadata = postingJsonMetadataEdit.value.trim();
        const privateKey = privateKeyJMet.value.trim(); 
        const useHiveKeychain = useHiveKeychainJMet.checked; 
        const editOnlyPosting = editOnlyPostingJMet.checked;  
        const authorityType = editOnlyPosting ? "Posting" : "Active";  

        let finalJsonMetadata = jsonMetadataEdit.value.trim();
        if (editOnlyPosting) {
            
            finalJsonMetadata = jsonMetadataEdit.defaultValue.trim();
        }

        
        const op = [
            "account_update2", {
                account: accountName,
                extensions: [],
                json_metadata: finalJsonMetadata,
                posting_json_metadata: newPostingJsonMetadata
            }
        ];

        try {
            
            if (useHiveKeychain) {
                if (window.hive_keychain) {
                    window.hive_keychain.requestBroadcast(accountName, [op], authorityType, function(result) {
                        if (result.success) {
                            resultMessageJMet.textContent = "Transaction successfully broadcast: " + JSON.stringify(result);
                            resultMessageJMet.style.color = "green";
                        } else {
                            resultMessageJMet.textContent = "Error: " + result.message;
                            resultMessageJMet.style.color = "red";
                        }
                    });
                } else {
                    resultMessageJMet.textContent = "You need to install Hive Keychain to sign the transaction.";
                    resultMessageJMet.style.color = "red";
                }
            } else {
                
                const key = dhive.PrivateKey.fromString(privateKey);
                const broadcastResult = await client.broadcast.sendOperations([op], key);
                resultMessageJMet.textContent = "Transaction successfully broadcast: " + JSON.stringify(broadcastResult);
                resultMessageJMet.style.color = "green";
            }
        } catch (error) {
            resultMessageJMet.textContent = "Error broadcasting transaction: " + error.message;
            resultMessageJMet.style.color = "red";
        } finally {
        
        if (useHiveKeychainJMet) useHiveKeychainJMet.checked = false;
        if (privateKeyJMetContainer) privateKeyJMetContainer.style.display = "block";
        if (privateKeyJMet) privateKeyJMet.value = "";
        validateSubmitButtonJMet();
        validateLoadJsonMetadataButton();
        }
    }


    
    
    function togglePrivateKeyInputVisibilityCJson() {
        if (useHiveKeychainCJson.checked) {
            privateKeyCJsonContainer.style.display = "none";
            privateKeyCJson.value = "";
        } else {
            privateKeyCJsonContainer.style.display = "block";
        }
    }

    
    function validateCustomJsonTool() {
        const accountName = accountNameCJson.value.trim();
        const customJsonId = customJsonIdCJson.value.trim();
        const customJsonContent = customJsonContentCJson.value.trim();
        const privateKey = privateKeyCJson ? privateKeyCJson.value.trim() : "";
        const useHiveKeychain = useHiveKeychainCJson.checked;

        
        const isValidAccount = validateAccountNameStructure(accountName);

        
        if (isValidAccount && customJsonId && customJsonContent && (privateKey || useHiveKeychain)) {
            submitButtonCJson.disabled = false;
            submitButtonCJson.style.backgroundColor = "green"; 
        } else {
            submitButtonCJson.disabled = true;
            submitButtonCJson.style.backgroundColor = ""; 
        }
    }

    
    accountNameCJson.addEventListener("input", () => validateAccountInput(accountNameCJson, submitButtonCJson));

    
    useHiveKeychainCJson.addEventListener("change", togglePrivateKeyInputVisibilityCJson);
    useHiveKeychainCJson.addEventListener("change", validateCustomJsonTool);

    
    accountNameCJson.addEventListener("input", validateCustomJsonTool);
    customJsonIdCJson.addEventListener("input", validateCustomJsonTool);
    customJsonContentCJson.addEventListener("input", validateCustomJsonTool);
    privateKeyCJson.addEventListener("input", validateCustomJsonTool);

    
    if (submitButtonCJson) {
        submitButtonCJson.addEventListener("click", submitTransactionCJson);
    }

    
    togglePrivateKeyInputVisibilityCJson();

    
    validateCustomJsonTool();

    
    async function submitTransactionCJson() {
        if (!accountNameCJson || !customJsonIdCJson || !customJsonContentCJson || !resultMessageCJson) return;

        const accountName = accountNameCJson.value.trim();
        const customJsonId = customJsonIdCJson.value.trim();
        const customJsonContent = customJsonContentCJson.value.trim();
        const privateKey = privateKeyCJson ? privateKeyCJson.value.trim() : "";
        const useHiveKeychain = useHiveKeychainCJson.checked;
        const isKeyActive = isKeyActiveCJson.checked;
        const authorityType = isKeyActive ? "Active" : "Posting";

        
        const op = [
            "custom_json", {
                id: customJsonId,
                json: customJsonContent,
                required_auths: isKeyActive ? [accountName] : [],
                required_posting_auths: isKeyActive ? [] : [accountName]
            }
        ];

        try {
            
            if (useHiveKeychain) {
                if (window.hive_keychain) {
                    window.hive_keychain.requestBroadcast(accountName, [op], authorityType, function(result) {
                        if (result.success) {
                            resultMessageCJson.textContent = "Transaction successfully broadcast: " + JSON.stringify(result);
                            resultMessageCJson.style.color = "green";
                        } else {
                            resultMessageCJson.textContent = "Error broadcasting transaction: " + result.message;
                            resultMessageCJson.style.color = "red";
                        }
                    });
                } else {
                    resultMessageCJson.textContent = "You need to install Hive Keychain to sign the transaction.";
                    resultMessageCJson.style.color = "red";
                }
            } else {
                
                const key = dhive.PrivateKey.fromString(privateKey);
                const broadcastResult = await client.broadcast.sendOperations([op], key);
                resultMessageCJson.textContent = "Transaction successfully broadcast: " + JSON.stringify(broadcastResult);
                resultMessageCJson.style.color = "green";
            }
        } catch (error) {
            resultMessageCJson.textContent = "Error broadcasting transaction: " + error.message;
            resultMessageCJson.style.color = "red";
        } finally {
        
        if (useHiveKeychainCJson) useHiveKeychainCJson.checked = false;
        if (privateKeyCJsonContainer) privateKeyCJsonContainer.style.display = "block";
        if (privateKeyCJson) privateKeyCJson.value = "";
        validateCustomJsonTool();
        }
    }


    
    
    function togglePrivateKeyInputVisibilityReqRec() {
        if (useHiveKeychainReqRec.checked) {
            privateActiveKeyReqRecContainer.style.display = "none";
            privateActiveKeyReqRec.value = "";
        } else {
            privateActiveKeyReqRecContainer.style.display = "block";
        }
    }

    
    function validateRequestRecoveryTool() {
        const accountName = accountNameReqRec.value.trim();
        const accountToBeRecovered = accountToBeRecoveredReqRec.value.trim();
        const newPublicOwnerKey = newPublicOwnerKeyReqRec.value.trim();
        const privateActiveKey = privateActiveKeyReqRec.value.trim();
        const useHiveKeychain = useHiveKeychainReqRec.checked;

        
        const isAccountNameValid = accountName && validateAccountNameStructure(accountName);
        const isAccountToBeRecoveredValid = accountToBeRecovered && validateAccountNameStructure(accountToBeRecovered);
        const areAccountsDifferent = accountName !== accountToBeRecovered;

        
        if (isAccountNameValid && isAccountToBeRecoveredValid && areAccountsDifferent && newPublicOwnerKey && (privateActiveKey || useHiveKeychain)) {
            submitButtonReqRec.disabled = false;
            submitButtonReqRec.style.backgroundColor = "green"; 
        } else {
            submitButtonReqRec.disabled = true;
            submitButtonReqRec.style.backgroundColor = ""; 
        }
    }

    
    accountNameReqRec.addEventListener("input", () => validateAccountInput(accountNameReqRec, submitButtonReqRec));
    accountToBeRecoveredReqRec.addEventListener("input", () => validateAccountInput(accountToBeRecoveredReqRec, submitButtonReqRec));

    
    useHiveKeychainReqRec.addEventListener("change", togglePrivateKeyInputVisibilityReqRec);
    useHiveKeychainReqRec.addEventListener("change", validateRequestRecoveryTool);

    
    accountNameReqRec.addEventListener("input", validateRequestRecoveryTool);
    accountToBeRecoveredReqRec.addEventListener("input", validateRequestRecoveryTool);
    newPublicOwnerKeyReqRec.addEventListener("input", validateRequestRecoveryTool);
    privateActiveKeyReqRec.addEventListener("input", validateRequestRecoveryTool);

    
    if (submitButtonReqRec) {
        submitButtonReqRec.addEventListener("click", submitTransactionReqRec);
    }

    
    togglePrivateKeyInputVisibilityReqRec();

    
    validateRequestRecoveryTool();

    
    async function submitTransactionReqRec() {
        if (!accountNameReqRec || !accountToBeRecoveredReqRec || !newPublicOwnerKeyReqRec || !resultMessageReqRec) return;

        const accountName = accountNameReqRec.value.trim();
        const accountToBeRecovered = accountToBeRecoveredReqRec.value.trim();
        const newPublicOwnerKey = newPublicOwnerKeyReqRec.value.trim();
        const privateActiveKey = privateActiveKeyReqRec ? privateActiveKeyReqRec.value.trim() : "";
        const useHiveKeychain = useHiveKeychainReqRec.checked;

        const newOwnerAuthority = {
            account_auths: [],
            key_auths: [[newPublicOwnerKey, 1]],
            weight_threshold: 1
        };

        const op = [
            "request_account_recovery", {
                account_to_recover: accountToBeRecovered,
                extensions: [],
                new_owner_authority: newOwnerAuthority,
                recovery_account: accountName
            }
        ];

        try {
            if (useHiveKeychain) {
                if (window.hive_keychain) {
                    window.hive_keychain.requestBroadcast(accountName, [op], "Active", function(result) {
                        if (result.success) {
                            resultMessageReqRec.textContent = "Transaction successfully broadcast: " + JSON.stringify(result);
                            resultMessageReqRec.style.color = "green";
                        } else {
                            resultMessageReqRec.textContent = "Error broadcasting transaction: " + result.message;
                            resultMessageReqRec.style.color = "red";
                        }
                    });
                } else {
                    resultMessageReqRec.textContent = "You need to install Hive Keychain to sign the transaction.";
                    resultMessageReqRec.style.color = "red";
                }
            } else {
                
                const key = dhive.PrivateKey.fromString(privateActiveKey);
                const broadcastResult = await client.broadcast.sendOperations([op], key);
                resultMessageReqRec.textContent = "Transaction successfully broadcast: " + JSON.stringify(broadcastResult);
                resultMessageReqRec.style.color = "green";
            }
        } catch (error) {
            resultMessageReqRec.textContent = "Error broadcasting transaction: " + error.message;
            resultMessageReqRec.style.color = "red";
        } finally {
        
        if (useHiveKeychainReqRec) useHiveKeychainReqRec.checked = false;
        if (privateActiveKeyReqRecContainer) privateActiveKeyReqRecContainer.style.display = "block";
        if (privateActiveKeyReqRec) privateActiveKeyReqRec.value = "";
        validateRequestRecoveryTool();
        }
    }


});



function clearInputs() {
    
    const accountNameUpd = document.getElementById("accountNameUpd");
    const newPublicActiveKeyUpd = document.getElementById("newPublicActiveKeyUpd");
    const newPublicPostingKeyUpd = document.getElementById("newPublicPostingKeyUpd");
    const newPublicMemoKeyUpd = document.getElementById("newPublicMemoKeyUpd");
    const useHiveKeychainUpd = document.getElementById("useHiveKeychainUpd");
    const privateActiveKeyUpdContainer = document.getElementById("privateActiveKeyUpdContainer");
    const privateActiveKeyUpd = document.getElementById("privateActiveKeyUpd");
    const submitButtonUpd = document.getElementById("submitButtonUpd");
    const resultMessageUpd = document.getElementById("resultMessageUpd");

    if (accountNameUpd) accountNameUpd.value = "";
    if (accountNameUpd) accountNameUpd.style.borderColor = "";
    if (newPublicActiveKeyUpd) newPublicActiveKeyUpd.value = "";
    if (newPublicPostingKeyUpd) newPublicPostingKeyUpd.value = "";
    if (newPublicMemoKeyUpd) newPublicMemoKeyUpd.value = "";
    if (useHiveKeychainUpd) useHiveKeychainUpd.checked = false;
    if (privateActiveKeyUpdContainer) privateActiveKeyUpdContainer.style.display = "block";
    if (privateActiveKeyUpd) privateActiveKeyUpd.value = "";
    if (submitButtonUpd) submitButtonUpd.disabled = true;
    if (resultMessageUpd) resultMessageUpd.textContent = "";

    
    const accountNameGov = document.getElementById("accountNameGov");
    const proxyAccountGov = document.getElementById("proxyAccountGov");
    const useHiveKeychainGov = document.getElementById("useHiveKeychainGov");
    const privateActiveKeyGovContainer = document.getElementById("privateActiveKeyGovContainer");
    const privateActiveKeyGov = document.getElementById("privateActiveKeyGov");
    const submitButtonGov = document.getElementById("submitButtonGov");
    const resultMessageGov = document.getElementById("resultMessageGov");

    if (accountNameGov) accountNameGov.value = "";
    if (accountNameGov) accountNameGov.style.borderColor = "";
    if (proxyAccountGov) proxyAccountGov.value = "";
    if (proxyAccountGov) proxyAccountGov.style.borderColor = "";
    if (useHiveKeychainGov) useHiveKeychainGov.checked = false;
    if (privateActiveKeyGovContainer) privateActiveKeyGovContainer.style.display = "block";
    if (privateActiveKeyGov) privateActiveKeyGov.value = "";
    if (submitButtonGov) submitButtonGov.disabled = true;
    if (resultMessageGov) resultMessageGov.textContent = "";

    
    const accountNameJMet = document.getElementById("accountNameJMet");
    const editOnlyPostingJMet = document.getElementById("editOnlyPostingJMet");
    const loadJsonMetadataButton = document.getElementById("loadJsonMetadataButton");
    const editJsonMetadataContainer = document.getElementById("editJsonMetadataContainer");
    const activeJsonMetadataSection = document.getElementById("activeJsonMetadataSection");
    const jsonMetadataEditLabel = document.getElementById("jsonMetadataEditLabel");
    const jsonMetadataEdit = document.getElementById("jsonMetadataEdit");
    const postingJsonMetadataEdit = document.getElementById("postingJsonMetadataEdit");
    const useHiveKeychainJMet = document.getElementById("useHiveKeychainJMet");
    const privateKeyJMetContainer = document.getElementById("privateKeyJMetContainer");
    const privateKeyJMet = document.getElementById("privateKeyJMet");
    const privateKeyJMetLabel = document.querySelector('label[for="privateKeyJMet"]');
    const submitButtonJMet = document.getElementById("submitButtonJMet");
    const resultMessageJMet = document.getElementById("resultMessageJMet");

    if (accountNameJMet) accountNameJMet.value = "";
    if (accountNameJMet) accountNameJMet.style.borderColor = "";
    if (editOnlyPostingJMet) editOnlyPostingJMet.checked = false;
    if (loadJsonMetadataButton) loadJsonMetadataButton.disabled = true;
    if (loadJsonMetadataButton) loadJsonMetadataButton.style.backgroundColor = "";
    if (editJsonMetadataContainer) editJsonMetadataContainer.style.display = "none";
    if (jsonMetadataEditLabel) jsonMetadataEditLabel.textContent = "Edit your account's \"JSON Metadata\":";
    if (jsonMetadataEdit) jsonMetadataEdit.value = "";
    if (jsonMetadataEdit) jsonMetadataEdit.placeholder = "Enter JSON metadata here...";
    if (jsonMetadataEdit) jsonMetadataEdit.readOnly = false;
    if (postingJsonMetadataEdit) postingJsonMetadataEdit.value = "";
    if (useHiveKeychainJMet) useHiveKeychainJMet.checked = false;
    if (privateKeyJMetContainer) privateKeyJMetContainer.style.display = "block";
    if (privateKeyJMet) privateKeyJMet.value = "";
    if (privateKeyJMet) privateKeyJMet.placeholder = "Private Active Key (5...)";
    if (privateKeyJMetLabel) privateKeyJMetLabel.textContent = "Your Private Active Key:";
    if (submitButtonJMet) submitButtonJMet.disabled = true;
    if (resultMessageJMet) resultMessageJMet.textContent = "";

    
    const accountNameCJson = document.getElementById("accountNameCJson");
    const customJsonIdCJson = document.getElementById("customJsonIdCJson");
    const customJsonContentCJson = document.getElementById("customJsonContentCJson");
    const isKeyActiveCJson = document.getElementById("isKeyActiveCJson");
    const useHiveKeychainCJson = document.getElementById("useHiveKeychainCJson");
    const privateKeyCJsonContainer = document.getElementById("privateKeyCJsonContainer");
    const privateKeyCJson = document.getElementById("privateKeyCJson");
    const submitButtonCJson = document.getElementById("submitButtonCJson");
    const resultMessageCJson = document.getElementById("resultMessageCJson");

    if (accountNameCJson) accountNameCJson.value = "";
    if (accountNameCJson) accountNameCJson.style.borderColor = "";
    if (customJsonIdCJson) customJsonIdCJson.value = "";
    if (customJsonContentCJson) customJsonContentCJson.value = "";
    if (isKeyActiveCJson) isKeyActiveCJson.checked = false;
    if (useHiveKeychainCJson) useHiveKeychainCJson.checked = false;
    if (privateKeyCJsonContainer) privateKeyCJsonContainer.style.display = "block";
    if (privateKeyCJson) privateKeyCJson.value = "";
    if (submitButtonCJson) submitButtonCJson.disabled = true;
    if (resultMessageCJson) resultMessageCJson.textContent = "";

    
    const accountNameReqRec = document.getElementById("accountNameReqRec");
    const accountToBeRecoveredReqRec = document.getElementById("accountToBeRecoveredReqRec");
    const newPublicOwnerKeyReqRec = document.getElementById("newPublicOwnerKeyReqRec");
    const useHiveKeychainReqRec = document.getElementById("useHiveKeychainReqRec");
    const privateActiveKeyReqRecContainer = document.getElementById("privateActiveKeyReqRecContainer");
    const privateActiveKeyReqRec = document.getElementById("privateActiveKeyReqRec");
    const submitButtonReqRec = document.getElementById("submitButtonReqRec");
    const resultMessageReqRec = document.getElementById("resultMessageReqRec");

    if (accountNameReqRec) accountNameReqRec.value = "";
    if (accountNameReqRec) accountNameReqRec.style.borderColor = "";
    if (accountToBeRecoveredReqRec) accountToBeRecoveredReqRec.value = "";
    if (accountToBeRecoveredReqRec) accountToBeRecoveredReqRec.style.borderColor = "";
    if (newPublicOwnerKeyReqRec) newPublicOwnerKeyReqRec.value = "";
    if (useHiveKeychainReqRec) useHiveKeychainReqRec.checked = false;
    if (privateActiveKeyReqRecContainer) privateActiveKeyReqRecContainer.style.display = "block";
    if (privateActiveKeyReqRec) privateActiveKeyReqRec.value = "";
    if (submitButtonReqRec) submitButtonReqRec.disabled = true;
    if (resultMessageReqRec) resultMessageReqRec.textContent = "";
}



function showPage(pageId) {

    
    if (pageId === "mainMenu") {
        if (typeof clearInputs === "function") {
            clearInputs(); 
        }
    }

    
    document.getElementById("mainMenu").style.display = "none";
    document.getElementById("accountUpdateTool").style.display = "none";
    document.getElementById("governanceTool").style.display = "none";
    document.getElementById("editJsonMetadataTool").style.display = "none";
    document.getElementById("customJsonTool").style.display = "none";
    document.getElementById("requestRecoveryTool").style.display = "none";

    
    document.getElementById(pageId).style.display = "block";
}



    </script>

</head>
    
<body>


    <div id="mainMenu">
    <h1>Non-Owner Operations Toolbox</h1>
        <p class="subtitle">• These tools require internet connectivity, in order to broadcast transactions to the Hive blockchain</p>
        <p class="subtitle">• Optionally, you can use <a href="https://hive-keychain.com/" target="_blank">Hive Keychain</a> to sign these transactions</p>
        <p class="subtitle">• For operations requiring Owner Authority, check my <a href="https://hassemer-g.github.io/hive-owner-ops/" target="_blank">Owner Operations Tool</a></p>
        <button class="button" onclick="showPage('accountUpdateTool')">Change Account Keys (other than Owner)</button>
        <button class="button" onclick="showPage('governanceTool')">Change Governance Proxy Account</button>
        <button class="button" onclick="showPage('editJsonMetadataTool')">Edit Account Metadata</button>
        <button class="button" onclick="showPage('customJsonTool')">Broadcast Custom JSON</button>
        <button class="button" onclick="showPage('requestRecoveryTool')">Request Account Recovery</button>
        <p class="footer">Made with ❤️ by <a href="https://peakd.com/@hassemer" target="_blank">@hassemer</a></p>
        <p class="footer">v. 1.3</p>
        <br><br>
        <h1>My Little Hive Tools</h1>
        <p class="subtitle"><a href="https://hassemer-g.github.io/hive-keys/" target="_blank">Key Derivation Toolbox</a></p>
        <p class="subtitle"><a href="https://hassemer-g.github.io/hive-owner-ops/" target="_blank">Owner Operations Toolbox</a></p>
        <p class="subtitle"><b>Non-Owner Operations Toolbox</b></p>
        <br>
        <p class="disclaimer"><b>Disclaimer:</b> These tools are provided "as-is", absolutely without guarantees. <span class="highlight">Use them at your own risk.</span> Please be careful 🙏🏻</p>
    </div>


    <div id="accountUpdateTool" class="hidden">
        <h1>Change Account Keys</h1>
        <p class="subtitle">• This tool can change your Hive account's keys, except the Owner Authority</p>
         <p class="subtitle">• Before using this tool, you can use my <a href="https://hassemer-g.github.io/hive-keys/" target="_blank">Key Derivation Toolbox</a> to generate a random "Master Password" and derive your new keys</p>
        <div class="form-group">
            <label for="accountNameUpd">Your Hive Account:</label>
            <input type="text" id="accountNameUpd" placeholder="E.g., youraccount">
        </div>
        <div class="form-group">
            <label for="newPublicActiveKeyUpd">New Public Active Key:</label>
            <input type="text" id="newPublicActiveKeyUpd" placeholder="New Public Active Key (STM...)">
        </div>
        <div class="form-group">
            <label for="newPublicPostingKeyUpd">New Public Posting Key:</label>
            <input type="text" id="newPublicPostingKeyUpd" placeholder="New Public Posting Key (STM...)">
        </div>
        <div class="form-group">
            <label for="newPublicMemoKeyUpd">New Public Memo Key:</label>
            <input type="text" id="newPublicMemoKeyUpd" placeholder="New Public Memo Key (STM...)">
            <div class="checkbox-container">
                <input type="checkbox" id="useHiveKeychainUpd">
                <br>
                <label for="useHiveKeychainUpd">Use Hive Keychain to sign the transaction</label>
            </div>
        </div>
        <div class="form-group" id="privateActiveKeyUpdContainer">
            <label for="privateActiveKeyUpd">Current Private Active Key:</label>
            <input type="password" id="privateActiveKeyUpd" placeholder="Private Active Key (5...)">
        </div>
        <button id="submitButtonUpd" disabled>Submit Transaction</button>
        <p id="resultMessageUpd"></p>
        <button class="button" onclick="showPage('mainMenu')">Return to Main Menu</button>
    </div>


    <div id="governanceTool" class="hidden">
        <h1>Change Governance Proxy Account</h1>
        <p class="subtitle">• This tool allows you to set, change or remove your Hive account's Governance Proxy Account</p>
        <div class="form-group">
            <label for="accountNameGov">Your Hive Account:</label>
            <input type="text" id="accountNameGov" placeholder="E.g., youraccount">
        </div>
        <div class="form-group">
            <label for="proxyAccountGov">Governance Proxy Account (leave blank to remove):</label>
            <input type="text" id="proxyAccountGov" placeholder="E.g., proxyaccount, or leave blank">
            <div class="checkbox-container">
                <input type="checkbox" id="useHiveKeychainGov">
                <br>
                <label for="useHiveKeychainGov">Use Hive Keychain to sign the transaction</label>
            </div>
        </div>
        <div class="form-group" id="privateActiveKeyGovContainer">
            <label for="privateActiveKeyGov">Your Private Active Key:</label>
            <input type="password" id="privateActiveKeyGov" placeholder="Private Active Key (5...)">
        </div>
        <button id="submitButtonGov" disabled>Submit Transaction</button>
        <p id="resultMessageGov"></p>
        <button class="button" onclick="showPage('mainMenu')">Return to Main Menu</button>
    </div>


    <div id="editJsonMetadataTool" class="hidden">
        <h1>Edit Account Metadata</h1>
        <p class="subtitle">• This tool allows you to view and edit your account's "JSON Metadata" and "Posting JSON Metadata"</p>
        <p class="subtitle">• The JSON must be correctly structured, else the transaction will fail</p>
        <p class="subtitle">• To empty your metadata, you can use <span class="code">[]</span>, <span class="code">{}</span>, <span class="code">""</span> or <span class="code">null</span></p>
        <p class="subtitle">• Changing the "JSON Metadata" requires Active Authority, while changing only the "Posting JSON Metadata" requires Posting Authority</p>
        <div class="form-group">
            <label for="accountNameJMet">Your Hive Account:</label>
            <input type="text" id="accountNameJMet" placeholder="E.g., youraccount">
        </div>
        <div class="checkbox-container">
            <input type="checkbox" id="editOnlyPostingJMet">
            <label for="editOnlyPostingJMet">Edit only the "Posting JSON Metadata"</label>
        </div>
        <br>
        <button id="loadJsonMetadataButton" disabled>Load Current Metadata</button>
        <div id="editJsonMetadataContainer" style="display:none;">
            <div id="activeJsonMetadataSection">
                <p id="jsonMetadataEditLabel">Edit your account's "JSON Metadata":</p>
                <div class="form-group">
                    <textarea class="textarea-metadata" id="jsonMetadataEdit" rows="3" placeholder="Enter JSON metadata here..."></textarea>
                </div>
            </div>
            <p>Edit your account's "Posting JSON Metadata":</p>
            <div class="form-group">
                <textarea class="textarea-metadata" id="postingJsonMetadataEdit" rows="3" placeholder="Enter posting JSON metadata here..."></textarea>
            </div>
            <div class="checkbox-container">
                <input type="checkbox" id="useHiveKeychainJMet">
                <label for="useHiveKeychainJMet">Use Hive Keychain to sign the transaction</label>
                <br><br>
            </div>
            <div class="form-group" id="privateKeyJMetContainer">
                <label for="privateKeyJMet">Your Private Active Key:</label>
                <input type="password" id="privateKeyJMet" placeholder="Private Active Key (5...)">
            </div>
            <button id="submitButtonJMet" disabled>Submit Transaction</button>
        </div>
        <p id="resultMessageJMet"></p>
        <button class="button" onclick="showPage('mainMenu')">Return to Main Menu</button>
    </div>


    <div id="customJsonTool" class="hidden">
        <h1>Broadcast Custom JSON</h1>
        <p class="subtitle">• This tool allows you to broadcast a "Custom JSON" operation</p>
        <p class="subtitle">• The JSON must be correctly structured, else the transaction will fail</p>
        <p class="subtitle">• You have to choose whether to sign using Posting or Active Authority</p>
        <div class="form-group">
            <label for="accountNameCJson">Your Hive Account:</label>
            <input type="text" id="accountNameCJson" placeholder="E.g., youraccount">
        </div>
        <div class="form-group">
            <label for="customJsonIdCJson">Custom JSON ID:</label>
            <input type="text" id="customJsonIdCJson" placeholder="Enter Custom JSON ID">
            <br><br>
            <div class="form-group">
                <label for="customJsonContentCJson">Custom JSON Content:</label>
                <textarea class="textarea-metadata" id="customJsonContentCJson" rows="3" placeholder="Enter JSON content here..."></textarea>
            </div>
            <div class="checkbox-container">
                <input type="checkbox" id="isKeyActiveCJson">
                <label for="isKeyActiveCJson">Sign with Active Authority instead of Posting</label>
            </div>
            <br>
            <div class="checkbox-container">
                <input type="checkbox" id="useHiveKeychainCJson">
                <label for="useHiveKeychainCJson">Use Hive Keychain to sign the transaction</label>
            </div>
        </div>
        <div class="form-group" id="privateKeyCJsonContainer">
            <label for="privateKeyCJson">Your Private Key (Posting or Active):</label>
            <input type="password" id="privateKeyCJson" placeholder="Private Key (5...)">
        </div>
        <button id="submitButtonCJson" disabled>Submit Transaction</button>
        <p id="resultMessageCJson"></p>
        <button class="button" onclick="showPage('mainMenu')">Return to Main Menu</button>
    </div>


    <div id="requestRecoveryTool" class="hidden">
        <h1>Request Account Recovery</h1>
        <p class="subtitle">• This operation should be broadcast by the owner of a Recovery Account in order to initiate an account recovery process</p>
        <p class="subtitle">• The recovery process subsequently must be completed by the rightful owner of the account to be recovered (e.g., by using my <a href="https://hassemer-g.github.io/hive-owner-ops/" target="_blank">Owner Operations Toolbox</a>)</p>
        <p class="subtitle">• The "New Public Owner Key" must be given to you by the rightful owner of the account to be recovered</p>
        <div class="form-group">
            <label for="accountNameReqRec">Your Hive Account:</label>
            <input type="text" id="accountNameReqRec" placeholder="E.g., youraccount">
        </div>
        <div class="form-group">
            <label for="accountToBeRecoveredReqRec">Account to be Recovered:</label>
            <input type="text" id="accountToBeRecoveredReqRec" placeholder="E.g., accounttoberecovered">
        </div>
        <div class="form-group">
            <label for="newPublicOwnerKeyReqRec">New Public Owner Key:</label>
            <input type="text" id="newPublicOwnerKeyReqRec" placeholder="New Public Owner Key (STM...)">
            <div class="checkbox-container">
                <input type="checkbox" id="useHiveKeychainReqRec">
                <br>
                <label for="useHiveKeychainReqRec">Use Hive Keychain to sign the transaction</label>
            </div>
        </div>
        <div class="form-group" id="privateActiveKeyReqRecContainer">
            <label for="privateActiveKeyReqRec">Your Private Active Key:</label>
            <input type="password" id="privateActiveKeyReqRec" placeholder="Private Active Key (5...)">
        </div>
        <button id="submitButtonReqRec" disabled>Submit Transaction</button>
        <p id="resultMessageReqRec"></p>
        <button class="button" onclick="showPage('mainMenu')">Return to Main Menu</button>
    </div>

</body>

</html>
